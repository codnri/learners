<h1>Subject page: <%= @subject.name %> </h1>

<%= link_to 'New Task', new_task_path(subject_id: @subject.id ) %>


<% unless @tasks.empty? %>
  <table>
    <th>description</th>
    <th>registration_date</th>
    <th>first check</th>
    <th>first reminder date</th>
    <th>second check</th>
    <th>second reminder date</th>
    <th>third check</th>
    <th>third reminder date</th>

    <% @tasks.each do |t| %>
    <tr>
        <td><%= link_to t.description,  task_path(t) %></td>
        <td><%= t.registration_date %></td>
        <td>
          <%= link_to task_toggle_path( task_id: t.id, which_checkbox:"first_check"), method: :patch, remote: true do %>
            <div id="status-first_check-<%= t.id%>">
                <%= t.first_check ? "\u2611" : "\u2610"  %>
            </div> 
          <% end %>
        </td>
        <td><%= t.first_reminder_date %></td>
        <td>
          <%= link_to task_toggle_path( task_id: t.id, which_checkbox:"second_check"), method: :patch, remote: true do %>
            <div id="status-second_check-<%= t.id%>">
                <%= t.first_check ? "\u2611" : "\u2610"  %>
            </div> 
          <% end %>
        </td>
        <td><%= t.second_reminder_date %></td>
        <td>
          <%= link_to task_toggle_path( task_id: t.id, which_checkbox:"third_check"), method: :patch, remote: true do %>
            <div id="status-third_check-<%= t.id%>">
                <%= t.first_check ? "\u2611" : "\u2610"  %>
            </div> 
          <% end %>        
        </td>
        <td><%= t.third_reminder_date %></td>


    </tr>
  <% end %>
  </table>
<% else %>
    <p>No Task</p>
<% end %>

<br/>
<%= link_to 'Back', tasks_path %> 
<%= link_to 'Edit', edit_subject_path %>
<%= link_to "Delete", @subject, method: :delete, data: { confirm: "Are you sure?" } %>